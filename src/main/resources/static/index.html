<html>
    <head>
        <script src="webjars/atmosphere-javascript/2.2.3/atmosphere.js"></script>
        <script>
            var subSocket;
            // We are now ready to cut the request
            var request = { url: document.location.toString() + 'websocket/' + (document.location.toString().indexOf('8080') !== -1 ? 'manager' : 'developer'),
                contentType : "application/json",
                logLevel : 'debug',
                trackMessageLength : true,
                reconnectInterval : 5000,
                maxStreamingLength : 1000
            };

            request.onOpen = function(response) {
                console.log("connected");
            };
            request.onMessage = function (response) {

                var message = response.responseBody;
                console.log(message);
            };

            subSocket = atmosphere.subscribe(request);
        </script>
    </head>

    <body>
        <button id="send" onclick="subSocket.push('foo');">Send</button>
    </body>

</html>